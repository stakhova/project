{"version":3,"sources":["validate_script.js"],"names":["validate","form","options","setings","errorFunction","submitFunction","highlightFunction","unhighlightFunction","$","extend","$form","length","attr","undefined","on","e","preventDefault","errorClass","focusCleanup","focusInvalid","invalidHandler","event","validator","errorPlacement","error","element","appendTo","closest","highlight","validClass","addClass","removeClass","unhighlight","is","submitHandler","submit","each","rules","required","messages","email","minlength","equalTo","validationCall","thisForm","formSur","serialize","ajax","url","data","method","success","trim","trigger","fancybox","close","popNext","popupId","popupWrap","open","src","type","opts","baseClass","afterClose","clearTimeout","timer","setTimeout","validationCallDocument","formData","FormData","append","find","files","contentType","processData","cache","response","validationCallDocuments","index","file","Maskedinput","mask","fancyboxForm","document","ready"],"mappings":"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","file":"validate_script.js","sourcesContent":["/**\r\n* Main validation form\r\n* @param {form} jquery obj - Form\r\n* @param {options} obj - object width params\r\n*/\r\nfunction validate(form, options){\r\n    var setings = {\r\n        errorFunction:null,\r\n        submitFunction:null,\r\n        highlightFunction:null,\r\n        unhighlightFunction:null\r\n    }\r\n    $.extend(setings, options);\r\n\r\n    var $form;\r\n    if (form == '$(this)'){\r\n        $form = form;\r\n    } else {\r\n        $form = $(form);\r\n    }\r\n\r\n    if ($form.length && $form.attr('novalidate') === undefined) {\r\n        $form.on('submit', function(e) {\r\n            e.preventDefault();\r\n        });\r\n\r\n        $form.validate({\r\n            errorClass : 'errorText',\r\n            focusCleanup : true,\r\n            focusInvalid : false,\r\n            invalidHandler: function(event, validator) {\r\n                if(typeof(setings.errorFunction) === 'function'){\r\n                    setings.errorFunction(form);\r\n                }\r\n            },\r\n            errorPlacement: function(error, element) {\r\n                error.appendTo( element.closest('.form_input'));\r\n            },\r\n            highlight: function(element, errorClass, validClass) {\r\n                $(element).addClass('error');\r\n                $(element).closest('.form_row').addClass('error').removeClass('valid');\r\n                if( typeof(setings.highlightFunction) === 'function' ) {\r\n                    setings.highlightFunction(form);\r\n                }\r\n            },\r\n            unhighlight: function(element, errorClass, validClass) {\r\n                $(element).removeClass('error');\r\n                if($(element).closest('.form_row').is('.error')){\r\n                    $(element).closest('.form_row').removeClass('error').addClass('valid');\r\n                }\r\n                if( typeof(setings.unhighlightFunction) === 'function' ) {\r\n                    setings.unhighlightFunction(form);\r\n                }\r\n            },\r\n            submitHandler: function(form) {\r\n                if( typeof(setings.submitFunction) === 'function' ) {\r\n                    setings.submitFunction(form);\r\n                } else {\r\n                    $form[0].submit();\r\n                }\r\n            }\r\n        });\r\n\r\n        $('[required]',$form).each(function(){\r\n            $(this).rules( \"add\", {\r\n                required: true,\r\n                messages: {\r\n                    required: \"Вы пропустили\"\r\n                }\r\n            });\r\n        });\r\n\r\n        if($('[type=\"email\"]',$form).length) {\r\n            $('[type=\"email\"]',$form).rules( \"add\",\r\n            {\r\n                messages: {\r\n                    email: \"Невалидный email\"\r\n                 }\r\n            });\r\n        }\r\n\r\n        if($('.tel-mask[required]',$form).length){\r\n            $('.tel-mask[required]',$form).rules(\"add\",\r\n            {\r\n                messages:{\r\n                    required:\"Введите номер мобильного телефона.\"\r\n                }\r\n            });\r\n        }\r\n\r\n        $('[type=\"password\"]',$form).each(function(){\r\n            if($(this).is(\"#re_password\") == true){\r\n                $(this).rules(\"add\", {\r\n                    minlength:3,\r\n                    equalTo:\"#password\",\r\n                    messages:{\r\n                        equalTo:\"Неверный пароль.\",\r\n                        minlength:\"Недостаточно символов.\"\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n/**\r\n* Sending form with a call popup\r\n* @param {form} string - Form\r\n*/\r\nfunction validationCall(form){\r\n\r\n  var thisForm = $(form);\r\n  var formSur = thisForm.serialize();\r\n\r\n    $.ajax({\r\n        url : thisForm.attr('action'),\r\n        data: formSur,\r\n        method:'POST',\r\n        success : function(data){\r\n            if ( data.trim() == 'true') {\r\n                thisForm.trigger(\"reset\");\r\n                $.fancybox.close();\r\n                popNext(\"#call_success\", \"call-popup\");\r\n            }\r\n            else {\r\n               thisForm.trigger('reset');\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\n/**\r\n* Sending form with a call popup\r\n* @param {popupId} string - Id form, that we show\r\n* @param {popupWrap} string - Name of class, for wrapping popup width form\r\n*/\r\nfunction popNext(popupId, popupWrap){\r\n\r\n     $.fancybox.open({\r\n        src  : popupId,\r\n        type : '',\r\n        opts : {\r\n            baseClass: popupWrap || '',\r\n            afterClose: function () {\r\n                $('form').trigger(\"reset\");\r\n                clearTimeout(timer);\r\n            }\r\n        }\r\n    });\r\n\r\n    var timer = null;\r\n\r\n    timer = setTimeout(function () {\r\n        $('form').trigger(\"reset\");\r\n        $.fancybox.close();\r\n    }, 2000);\r\n\r\n}\r\n\r\n\r\n/**\r\n* Submitting the form with the file\r\n* @param {form} string - Form\r\n* не использовать input[type=\"file\"] в форме и не забыть дописать форме enctype=\"multipart/form-data\"\r\n*/\r\nfunction validationCallDocument(form){\r\n\r\n    var thisForm = $(form);\r\n    var formData = new FormData($(form)[0]);\r\n\r\n    formData.append('file', thisForm.find('input[type=file]')[0].files[0]);\r\n\r\n    $.ajax({\r\n        url: thisForm.attr('action'),\r\n        type: \"POST\",\r\n        data: formData,\r\n        contentType:false,\r\n        processData:false,\r\n        cache:false,\r\n        success: function(response) {\r\n            thisForm.trigger(\"reset\");\r\n            popNext(\"#call_success\", \"call-popup\");\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\n/**\r\n* Submitting the form with the files\r\n* @param {form} string - Form\r\n* не использовать input[type=\"file\"] в форме и не забыть дописать форме enctype=\"multipart/form-data\"\r\n*/\r\nfunction validationCallDocuments(form){\r\n\r\n    var thisForm = $(form);\r\n    var formData = new FormData($(form)[0]);\r\n\r\n    $.each(thisForm.find('input[type=\"file\"]')[0].files, function(index, file){\r\n        formData.append('file['+index+']', file);\r\n    });\r\n\r\n    $.ajax({\r\n        url: thisForm.attr('action'),\r\n        type: \"POST\",\r\n        data: formData,\r\n        contentType:false,\r\n        processData:false,\r\n        cache:false,\r\n        success: function(response) {\r\n            thisForm.trigger(\"reset\");\r\n            popNext(\"#call_success\", \"call-popup\");\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\n/**\r\n* Mask on input(russian telephone)\r\n*/\r\nfunction Maskedinput(){\r\n    if($('.tel-mask')){\r\n        $('.tel-mask').mask('+9 (999) 999-99-99 ');\r\n    }\r\n}\r\n\r\n\r\n/**\r\n* Fansybox on form\r\n*/\r\nfunction fancyboxForm(){\r\n    $('.fancybox-form').fancybox({\r\n        baseClass: 'fancybox-form'\r\n    })\r\n}\r\n\r\n\r\n$(document).ready(function(){\r\n\r\n   validate('#call-popup .contact-form', {submitFunction:validationCall});\r\n   Maskedinput();\r\n   fancyboxForm();\r\n\r\n});"]}