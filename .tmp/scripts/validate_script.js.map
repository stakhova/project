{"version":3,"sources":["validate_script.js"],"names":["validate","form","options","setings","errorFunction","submitFunction","highlightFunction","unhighlightFunction","$","extend","$form","length","attr","undefined","on","e","preventDefault","errorClass","focusCleanup","focusInvalid","invalidHandler","event","validator","errorPlacement","error","element","appendTo","closest","highlight","validClass","addClass","removeClass","unhighlight","is","submitHandler","submit","each","rules","required","messages","email","minlength","equalTo","validationCall","thisForm","formSur","serialize","ajax","url","data","method","success","trim","trigger","fancybox","close","popNext","popupId","popupWrap","open","src","type","opts","baseClass","afterClose","clearTimeout","timer","setTimeout","validationCallDocument","formData","FormData","append","find","files","contentType","processData","cache","response","validationCallDocuments","index","file","Maskedinput","mask","fancyboxForm","document","ready"],"mappings":"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","file":"validate_script.js","sourcesContent":["/**\n* Main validation form\n* @param {form} jquery obj - Form\n* @param {options} obj - object width params\n*/\nfunction validate(form, options){\n    var setings = {\n        errorFunction:null,\n        submitFunction:null,\n        highlightFunction:null,\n        unhighlightFunction:null\n    }\n    $.extend(setings, options);\n\n    var $form;\n    if (form == '$(this)'){\n        $form = form;\n    } else {\n        $form = $(form);\n    }\n\n    if ($form.length && $form.attr('novalidate') === undefined) {\n        $form.on('submit', function(e) {\n            e.preventDefault();\n        });\n\n        $form.validate({\n            errorClass : 'errorText',\n            focusCleanup : true,\n            focusInvalid : false,\n            invalidHandler: function(event, validator) {\n                if(typeof(setings.errorFunction) === 'function'){\n                    setings.errorFunction(form);\n                }\n            },\n            errorPlacement: function(error, element) {\n                error.appendTo( element.closest('.form_input'));\n            },\n            highlight: function(element, errorClass, validClass) {\n                $(element).addClass('error');\n                $(element).closest('.form_row').addClass('error').removeClass('valid');\n                if( typeof(setings.highlightFunction) === 'function' ) {\n                    setings.highlightFunction(form);\n                }\n            },\n            unhighlight: function(element, errorClass, validClass) {\n                $(element).removeClass('error');\n                if($(element).closest('.form_row').is('.error')){\n                    $(element).closest('.form_row').removeClass('error').addClass('valid');\n                }\n                if( typeof(setings.unhighlightFunction) === 'function' ) {\n                    setings.unhighlightFunction(form);\n                }\n            },\n            submitHandler: function(form) {\n                if( typeof(setings.submitFunction) === 'function' ) {\n                    setings.submitFunction(form);\n                } else {\n                    $form[0].submit();\n                }\n            }\n        });\n\n        $('[required]',$form).each(function(){\n            $(this).rules( \"add\", {\n                required: true,\n                messages: {\n                    required: \"Вы пропустили\"\n                }\n            });\n        });\n\n        if($('[type=\"email\"]',$form).length) {\n            $('[type=\"email\"]',$form).rules( \"add\",\n            {\n                messages: {\n                    email: \"Невалидный email\"\n                 }\n            });\n        }\n\n        if($('.tel-mask[required]',$form).length){\n            $('.tel-mask[required]',$form).rules(\"add\",\n            {\n                messages:{\n                    required:\"Введите номер мобильного телефона.\"\n                }\n            });\n        }\n\n        $('[type=\"password\"]',$form).each(function(){\n            if($(this).is(\"#re_password\") == true){\n                $(this).rules(\"add\", {\n                    minlength:3,\n                    equalTo:\"#password\",\n                    messages:{\n                        equalTo:\"Неверный пароль.\",\n                        minlength:\"Недостаточно символов.\"\n                    }\n                });\n            }\n        })\n    }\n}\n\n\n/**\n* Sending form with a call popup\n* @param {form} string - Form\n*/\nfunction validationCall(form){\n\n  var thisForm = $(form);\n  var formSur = thisForm.serialize();\n\n    $.ajax({\n        url : thisForm.attr('action'),\n        data: formSur,\n        method:'POST',\n        success : function(data){\n            if ( data.trim() == 'true') {\n                thisForm.trigger(\"reset\");\n                $.fancybox.close();\n                popNext(\"#call_success\", \"call-popup\");\n            }\n            else {\n               thisForm.trigger('reset');\n            }\n\n        }\n    });\n\n}\n\n\n/**\n* Sending form with a call popup\n* @param {popupId} string - Id form, that we show\n* @param {popupWrap} string - Name of class, for wrapping popup width form\n*/\nfunction popNext(popupId, popupWrap){\n\n     $.fancybox.open({\n        src  : popupId,\n        type : '',\n        opts : {\n            baseClass: popupWrap || '',\n            afterClose: function () {\n                $('form').trigger(\"reset\");\n                clearTimeout(timer);\n            }\n        }\n    });\n\n    var timer = null;\n\n    timer = setTimeout(function () {\n        $('form').trigger(\"reset\");\n        $.fancybox.close();\n    }, 2000);\n\n}\n\n\n/**\n* Submitting the form with the file\n* @param {form} string - Form\n* не использовать input[type=\"file\"] в форме и не забыть дописать форме enctype=\"multipart/form-data\"\n*/\nfunction validationCallDocument(form){\n\n    var thisForm = $(form);\n    var formData = new FormData($(form)[0]);\n\n    formData.append('file', thisForm.find('input[type=file]')[0].files[0]);\n\n    $.ajax({\n        url: thisForm.attr('action'),\n        type: \"POST\",\n        data: formData,\n        contentType:false,\n        processData:false,\n        cache:false,\n        success: function(response) {\n            thisForm.trigger(\"reset\");\n            popNext(\"#call_success\", \"call-popup\");\n        }\n    });\n\n}\n\n\n/**\n* Submitting the form with the files\n* @param {form} string - Form\n* не использовать input[type=\"file\"] в форме и не забыть дописать форме enctype=\"multipart/form-data\"\n*/\nfunction validationCallDocuments(form){\n\n    var thisForm = $(form);\n    var formData = new FormData($(form)[0]);\n\n    $.each(thisForm.find('input[type=\"file\"]')[0].files, function(index, file){\n        formData.append('file['+index+']', file);\n    });\n\n    $.ajax({\n        url: thisForm.attr('action'),\n        type: \"POST\",\n        data: formData,\n        contentType:false,\n        processData:false,\n        cache:false,\n        success: function(response) {\n            thisForm.trigger(\"reset\");\n            popNext(\"#call_success\", \"call-popup\");\n        }\n    });\n\n}\n\n\n/**\n* Mask on input(russian telephone)\n*/\nfunction Maskedinput(){\n    if($('.tel-mask')){\n        $('.tel-mask').mask('+9 (999) 999-99-99 ');\n    }\n}\n\n\n/**\n* Fansybox on form\n*/\nfunction fancyboxForm(){\n    $('.fancybox-form').fancybox({\n        baseClass: 'fancybox-form'\n    })\n}\n\n\n$(document).ready(function(){\n\n   validate('#call-popup .contact-form', {submitFunction:validationCall});\n   Maskedinput();\n   fancyboxForm();\n\n});"]}